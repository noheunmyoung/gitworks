(function(){function e(b){var d=this instanceof POLARIS.ui.dialog.checkbox;b.hasAttribute(this.id)&&(b=b.getAttribute(this.id),d?this.setValue(g[this.id]["true"]==b.toLowerCase()):this.setValue(b))}function f(b){var d=""===this.getValue(),c=this instanceof POLARIS.ui.dialog.checkbox,a=this.getValue();d?b.removeAttribute(this.att||this.id):c?b.setAttribute(this.id,g[this.id][a]):b.setAttribute(this.att||this.id,a)}var g={scrolling:{"true":"yes","false":"no"},frameborder:{"true":"1","false":"0"}},h=
/(^\s*(\d+)((px)|\%)?\s*$)|^$/i;POLARIS.dialog.add("iframe",function(b){var d=b.lang.iframe,c=b.lang.common;return{title:d.title,minWidth:244,minHeight:220,resizable:POLARIS.DIALOG_RESIZE_NONE,onShow:function(){this.fakeImage=this.iframeNode=null;var a=this.getSelectedElement();a&&a.data("polaris-real-element-type")&&"iframe"==a.data("polaris-real-element-type")&&(this.fakeImage=a,this.iframeNode=a=b.restoreRealElement(a),this.setupContent(a))},onOk:function(){var a;a=this.fakeImage?this.iframeNode:
new POLARIS.dom.element("iframe");var c={},d={};this.commitContent(a,c,d);a=b.createFakeElement(a,"polaris_iframe","iframe",!0);a.setAttributes(d);a.setStyles(c);this.fakeImage?(a.replace(this.fakeImage),b.getSelection().selectElement(a)):b.insertElement(a)},contents:[{id:"info",label:c.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{id:"src",type:"text",label:c.url,required:!0,validate:POLARIS.dialog.validate.notEmpty(d.noUrl),setup:e,commit:f}]},{type:"hbox",children:[{id:"width",
type:"text",requiredContent:"iframe[width]",style:"width:78px;",maxLength:3,labelLayout:"vertical",label:c.width,validate:function(){var a=this.getValue().match(h);(a=!(!a||0===parseInt(a[1],10)))?(a=this.getValue(),(a=!!(0<a&&512>=a))||alert(d.invalidWidth)):alert(b.lang.common.invalidWidth);return a},setup:e,commit:f},{type:"vbox",children:[{type:"html",html:"\x26nbsp;"},{type:"html",html:b.lang.common.unitPx}]},{id:"height",type:"text",requiredContent:"iframe[height]",style:"width:78px;",maxLength:3,
labelLayout:"vertical",label:c.height,validate:function(){var a=this.getValue().match(h);(a=!(!a||0===parseInt(a[1],10)))?(a=this.getValue(),(a=!!(0<a&&512>=a))||alert(d.invalidHeight)):alert(b.lang.common.invalidHeight);return a},setup:e,commit:f},{type:"vbox",children:[{type:"html",html:"\x26nbsp;"},{type:"html",html:b.lang.common.unitPx}]}]},{id:"align",type:"select",requiredContent:"iframe[align]","default":"",items:[[c.notSet,""],[c.alignLeft,"left"],[c.alignRight,"right"],[c.alignTop,"top"],
[c.alignMiddle,"middle"],[c.alignBottom,"bottom"]],style:"width:100%",labelLayout:"vertical",label:c.align,setup:function(a,b){e.apply(this,arguments);if(b){var c=b.getAttribute("align");this.setValue(c&&c.toLowerCase()||"")}},commit:function(a,b,c){f.apply(this,arguments);this.getValue()&&(c.align=this.getValue())}},{type:"hbox",widths:["50%","50%"],children:[{id:"scrolling",type:"checkbox",style:"padding-left: 10px;",requiredContent:"iframe[scrolling]",label:d.scrolling,setup:e,commit:f},{id:"frameborder",
type:"checkbox",style:"padding-left: 10px;",requiredContent:"iframe[frameborder]",label:d.border,setup:e,commit:f}]},{type:"hbox",widths:["50%","50%"],children:[{id:"title",type:"text",requiredContent:"iframe[title]",label:c.advisoryTitle,setup:e,commit:f},{id:"name",type:"text",requiredContent:"iframe[name]",label:c.name,setup:e,commit:f}]},{type:"text",id:"id",requiredContent:"iframe[id]",label:b.lang.common.id,setup:e,commit:f}]}]}})})();