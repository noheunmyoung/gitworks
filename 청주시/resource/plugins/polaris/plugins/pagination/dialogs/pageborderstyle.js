(function(){POLARIS.dialog.add("pageoutlinebg",function(e){function k(a,b,c){return function(){var d=this.getValue().trim(),d=!!(POLARIS.dialog.validate.integer()(d)&&d>=b&&d<c+1);d||(alert(a),this.select());return d}}function l(a){0==a.getContentElement("page","borderTop").getValue()&&0==a.getContentElement("page","borderBottom").getValue()&&0==a.getContentElement("page","borderLeft").getValue()&&0==a.getContentElement("page","borderRight").getValue()&&a.getContentElement("page","selPageBorderStyle").setValue("none")}
function m(a){"none"==a.getContentElement("page","selPageBorderStyle").getValue()&&a.getContentElement("page","selPageBorderStyle").setValue("solid")}var c=e.lang.pagination,n=e.plugins.uicolor,b=e.plugins.pagination.pageInfo;return{title:c.pageoutlinebg,minWidth:250,minHeight:180,resizable:POLARIS.DIALOG_RESIZE_NONE,contents:[{id:"page",label:c.pageoutlinebg,elements:[{type:"vbox",className:"vbox_padding_top_zero_first",children:[{type:"fieldset",label:c.pageBorderStyle.margin,children:[]},{type:"hbox",
widths:["50%","50%"],children:[{type:"hbox",widths:["80%","20%"],children:[{type:"text",id:"txtLeftMargin",label:c.pageBorderStyle.leftMargin,validate:k(c.pageBorderStyle.invalidLeftMargin,0,25),"default":"5",setup:function(){if(b.borderLeftMargin){var a=parseInt(b.borderLeftMargin);0<=a&&this.setValue(a+"")}}},{type:"vbox",children:[{type:"html",html:"\x26nbsp;",style:"line-height: 22px;"},{type:"html",html:c.outline.pageUnit}]}]},{type:"hbox",widths:["80%","20%"],children:[{type:"text",id:"txtTopMargin",
label:c.pageBorderStyle.topMargin,validate:k(c.pageBorderStyle.invalidTopMargin,0,25),"default":"5",setup:function(){if(b.borderTopMargin){var a=parseInt(b.borderTopMargin);0<=a&&this.setValue(a+"")}}},{type:"vbox",children:[{type:"html",html:"\x26nbsp;",style:"line-height: 22px;"},{type:"html",html:c.outline.pageUnit}]}]}]},{type:"hbox",widths:["50%","50%"],className:"dialog_td_border_top_zero",children:[{type:"hbox",widths:["80%","20%"],children:[{type:"text",id:"txtRightMargin",label:c.pageBorderStyle.rightMargin,
validate:k(c.pageBorderStyle.invalidRightMargin,0,25),"default":"5",setup:function(){if(b.borderRightMargin){var a=parseInt(b.borderRightMargin);0<=a&&this.setValue(a+"")}}},{type:"vbox",children:[{type:"html",html:"\x26nbsp;",style:"line-height: 22px;"},{type:"html",html:c.outline.pageUnit}]}]},{type:"hbox",widths:["80%","20%"],children:[{type:"text",id:"txtBottomMargin",label:c.pageBorderStyle.bottomMargin,validate:k(c.pageBorderStyle.invalidBottomMargin,0,25),"default":"5",setup:function(){if(b.borderBottomMargin){var a=
parseInt(b.borderBottomMargin);0<=a&&this.setValue(a+"")}}},{type:"vbox",children:[{type:"html",html:"\x26nbsp;",style:"line-height: 22px;"},{type:"html",html:c.outline.pageUnit}]}]}]},{type:"fieldset",label:c.pageBorderStyle.pageBackgroundImage,children:[]},{type:"hbox",widths:["auto","auto"],children:[{type:"text",id:"txtPageBackgroundImage",style:"width: 197px;",label:"",setup:function(){var a=b.backgroundImage||"",a="none"==a?"":a.replace(/url\(\s*(["']?)\s*([^\)]*)\s*\1\s*\)/i,function(a,b,c){return c});
this.setValue(a)}},{type:"vbox",filebrowser:"uploadButton2",style:"width: 87px;",label:e.lang.image.upload,className:"upload_button_parent",children:[{type:"file",id:"upload2",style:"width:100%",hidden:!0,label:e.lang.image.btnUpload,size:38},{type:"fileButton",id:"uploadButton2",style:"width:100%",filebrowser:"page:txtPageBackgroundImage",label:e.lang.image.btnUpload,"for":["page","upload2"]}]}]},{type:"select",id:"repeat",label:c.pageBorderStyle.repeatLabel,"default":"repeat",items:[[c.pageBorderStyle.notRepeat,
"no-repeat"],[c.pageBorderStyle.repeat,"repeat"],[c.pageBorderStyle.horizontalRepeat,"repeat-x"],[c.pageBorderStyle.verticalRepeat,"repeat-y"]],setup:function(){var a=b.backgroundRepeat||"";""==a?this.setValue("no-repeat"):this.setValue(a)}},{type:"fieldset",label:c.pageBorderStyle.pageBorderBgColor,style:"margin-top: 5px;",children:[]},{type:"hbox",widths:["50%","50%"],children:[{type:"select",id:"selPageBorderStyle",label:c.pageBorderStyle.pageBorderStyle,"default":"solid",items:[[c.pageBorderStyle.borderStyles.border_none,
"none"],[c.pageBorderStyle.borderStyles.border_solid,"solid"],[c.pageBorderStyle.borderStyles.border_double,"double"],[c.pageBorderStyle.borderStyles.border_dashed,"dashed"],[c.pageBorderStyle.borderStyles.border_dotted,"dotted"]],setup:function(){b.borderStyle&&this.setValue(b.borderStyle)},onChange:function(){var a=this.getDialog().getContentElement("page","borderTop").getValue(),b=this.getDialog().getContentElement("page","borderBottom").getValue(),c=this.getDialog().getContentElement("page","borderLeft").getValue(),
d=this.getDialog().getContentElement("page","borderRight").getValue(),f=this.getDialog().getContentElement("page","selPageBorderStyle").getValue(),h=POLARIS.document.getById("polaris_border_style_preview");1==a&&h.setStyle("border-top-style",f);1==b&&h.setStyle("border-bottom-style",f);1==c&&h.setStyle("border-left-style",f);1==d&&h.setStyle("border-right-style",f);"none"==this.getValue()&&(this.getDialog().getContentElement("page","borderTop").setValue(!1),this.getDialog().getContentElement("page",
"borderBottom").setValue(!1),this.getDialog().getContentElement("page","borderLeft").setValue(!1),this.getDialog().getContentElement("page","borderRight").setValue(!1))}},{type:"text",id:"txtPageBorderWidth",label:c.pageBorderStyle.pageBorderWidth,maxLength:2,validate:k(c.pageBorderStyle.invalidPageBorder,0,10),"default":"1",setup:function(){b.borderWidth&&this.setValue(b.borderWidth)},onChange:function(){POLARIS.document.getById("polaris_border_style_preview").setStyle("border-width",POLARIS.tools.cssLength(parseInt(this.getValue())))}}]},
{type:"hbox",widths:["50%","50%"],children:[{type:"vbox",children:[{type:"html",id:"borderColor",html:"\x3cspan\x3e"+c.pageBorderStyle.pageBorderColor+"\x3c/span\x3e"},{type:"vbox",className:"color_choose_parent",children:[{type:"button",id:"borderColorChoose","class":"colorChooser",label:"",setup:function(){var a=b.borderColor?b.borderColor:"#000000";this.getElement().setStyle("background-color",a);this.setValue(a);this.onChange()},onLoad:function(){this.getElement().getParent().setStyle("vertical-align",
"bottom")},onClick:function(){n&&e.getUIColorFromDialog(function(a){a&&(this.getElement().setStyle("background-color",a),this.setValue(a),this.onChange())},this)},isChanged:function(){return this.getValue()!=this.getInitValue()},setInitValue:function(){this._.initValue=this.getValue()},getInitValue:function(){return this._.initValue},onChange:function(){var a=this.getDialog().getContentElement("page","borderTop").getValue(),b=this.getDialog().getContentElement("page","borderBottom").getValue(),c=
this.getDialog().getContentElement("page","borderLeft").getValue(),d=this.getDialog().getContentElement("page","borderRight").getValue(),f=this.getValue(),h=POLARIS.document.getById("polaris_border_style_preview");1==a&&h.setStyle("border-top-color",f);1==b&&h.setStyle("border-bottom-color",f);1==c&&h.setStyle("border-left-color",f);1==d&&h.setStyle("border-right-color",f)}}]}]},{type:"vbox",children:[{type:"html",id:"bgColor",html:"\x3cspan\x3e"+c.pageBorderStyle.pageBackgroundColor+"\x3c/span\x3e"},
{type:"vbox",className:"color_choose_parent",children:[{type:"button",id:"backgroundColorChoose","class":"colorChooser",label:"",setup:function(){var a=b.backgroundColor?b.backgroundColor:"#ffffff";POLARIS.document.getById("polaris_border_style_preview").setStyle("background-color",a);this.getElement().setStyle("background-color",a);this.setValue(a)},onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){n&&e.getUIColorFromDialog(function(a){a&&(POLARIS.document.getById("polaris_border_style_preview").setStyle("background-color",
a),this.getElement().setStyle("background-color",a),this.setValue(a))},this)}}]}]}]},{type:"vbox",children:[{type:"html",html:"\x3cspan\x3e"+c.pageBorderStyle.pageBorderSelection+"\x3c/span\x3e"},{type:"vbox",style:"border: 1px solid #a0a2ab; border-radius: 2px; background-color: #fffeff; padding: 5px; height: 100%;",textalign:"center",className:"preview_box",children:[{type:"html",html:'\x3cspan style\x3d"text-align:center; vertical-align: middle;"\x3e'+c.pageBorderStyle.pageBorderSelectionInfo+
"\x3c/span\x3e"},{type:"checkbox",id:"borderTop","default":!1,label:"",setup:function(){b.borderTop&&"none"!=b.borderTop&&(this.setValue(!0),this.onClick())},onClick:function(){var a=POLARIS.document.getById("polaris_border_style_preview");if(1==this.getValue()){var b=this.getDialog().getContentElement("page","borderColorChoose").getValue(),c=this.getDialog().getContentElement("page","selPageBorderStyle").getValue(),d=this.getDialog().getContentElement("page","txtPageBorderWidth").getValue(),d=POLARIS.tools.cssLength(d);
a.setStyle("border-top-color",b);a.setStyle("border-top-style",c);a.setStyle("border-top-width",d);m(this.getDialog())}else a.removeStyle("border-top"),l(this.getDialog())}},{type:"hbox",verticalalign:"middle",widths:["50%","32px","50%"],children:[{type:"checkbox",id:"borderLeft",style:"float:right;","default":!1,label:"",setup:function(){b.borderLeft&&"none"!=b.borderLeft&&(this.setValue(!0),this.onClick())},onClick:function(){var a=POLARIS.document.getById("polaris_border_style_preview");if(1==
this.getValue()){var b=this.getDialog().getContentElement("page","borderColorChoose").getValue(),c=this.getDialog().getContentElement("page","selPageBorderStyle").getValue(),d=this.getDialog().getContentElement("page","txtPageBorderWidth").getValue(),d=POLARIS.tools.cssLength(d);a.setStyle("border-left-color",b);a.setStyle("border-left-style",c);a.setStyle("border-left-width",d);m(this.getDialog())}else a.removeStyle("border-left"),l(this.getDialog())}},{id:"borderPreview",type:"html",html:'\x3cdiv id\x3d"polaris_border_style_preview" style\x3d"width: 32px; height: 32px;"\x3e\x3c/div\x3e'},
{type:"checkbox",id:"borderRight",style:"float:left;","default":!1,label:"",setup:function(){b.borderRight&&"none"!=b.borderRight&&(this.setValue(!0),this.onClick())},onClick:function(){var a=POLARIS.document.getById("polaris_border_style_preview");if(1==this.getValue()){var b=this.getDialog().getContentElement("page","borderColorChoose").getValue(),c=this.getDialog().getContentElement("page","selPageBorderStyle").getValue(),d=this.getDialog().getContentElement("page","txtPageBorderWidth").getValue(),
d=POLARIS.tools.cssLength(d);a.setStyle("border-right-color",b);a.setStyle("border-right-style",c);a.setStyle("border-right-width",d);m(this.getDialog())}else a.removeStyle("border-right"),l(this.getDialog())}}]},{type:"checkbox",id:"borderBottom","default":!1,label:"",setup:function(){b.borderBottom&&"none"!=b.borderBottom&&(this.setValue(!0),this.onClick())},onClick:function(){var a=POLARIS.document.getById("polaris_border_style_preview");if(1==this.getValue()){var b=this.getDialog().getContentElement("page",
"borderColorChoose").getValue(),c=this.getDialog().getContentElement("page","selPageBorderStyle").getValue(),d=this.getDialog().getContentElement("page","txtPageBorderWidth").getValue(),d=POLARIS.tools.cssLength(d);a.setStyle("border-bottom-color",b);a.setStyle("border-bottom-style",c);a.setStyle("border-bottom-width",d);m(this.getDialog())}else a.removeStyle("border-bottom"),l(this.getDialog())}}]}]}]}]}],onShow:function(){b=e.plugins.pagination.pageInfo;var a=[];0<b.borderLeft.length?a=b.borderLeft.split(" "):
0<b.borderRight.length?a=b.borderRight.split(" "):0<b.borderTop.length?a=b.borderTop.split(" "):0<b.borderBottom.length&&(a=b.borderBottom.split(" "));for(var c=0;c<a.length;c++)(new RegExp(/none|dashed|double|solid|dotted/g)).test(a[c])?b.borderStyle=a[c]:(new RegExp(/px|em|pt$/g)).test(a[c])?(b.borderWidth=a[c],b.borderWidth=b.borderWidth.replace(/[^.0-9]/g,"")):b.borderColor=a[c];this.setupContent()},onOk:function(){var a=this.getParentEditor();a.fire("saveSnapshot");var g=(this.getContentElement("page",
"txtLeftMargin").getValue()||"0")+c.outline.pageUnit,e=(this.getContentElement("page","txtRightMargin").getValue()||"0")+c.outline.pageUnit,d=(this.getContentElement("page","txtTopMargin").getValue()||"0")+c.outline.pageUnit,f=(this.getContentElement("page","txtBottomMargin").getValue()||"0")+c.outline.pageUnit;b.borderLeftMargin=g;b.borderTopMargin=d;b.borderRightMargin=e;b.borderBottomMargin=f;b.backgroundColor=this.getContentElement("page","backgroundColorChoose").getValue();b.borderColor=this.getContentElement("page",
"borderColorChoose").getValue();b.borderWidth=this.getContentElement("page","txtPageBorderWidth").getValue();b.borderStyle=this.getContentElement("page","selPageBorderStyle").getValue();b.borderColor||(b.borderColor="#000000");b.borderStyle||(b.borderStyle="solid");b.borderWidth||(b.borderWidth="0");var g=POLARIS.tools.cssLength(b.borderWidth)+" "+b.borderStyle+" "+b.borderColor,e=this.getContentElement("page","borderTop").getValue(),d=this.getContentElement("page","borderBottom").getValue(),f=this.getContentElement("page",
"borderLeft").getValue(),h=this.getContentElement("page","borderRight").getValue();b.borderTop=e?g:"";b.borderBottom=d?g:"";b.borderLeft=f?g:"";b.borderRight=h?g:"";b.border="none"==b.borderStyle?!1:!0;(g=this.getContentElement("page","txtPageBackgroundImage").getValue())?(g=g.replace(/ /g,"%20"),b.backgroundImage='url("'+g+'")'):b.backgroundImage="";e=this.getContentElement("page","repeat").getValue();g&&e?(b.backgroundRepeat=e,"no-repeat"==e&&(b.backgroundSize="cover")):(b.backgroundRepeat="",b.backgroundSize=
"");a.plugins.pagination.updatePageStyle(a);a.fire("saveSnapshot")}}})})();