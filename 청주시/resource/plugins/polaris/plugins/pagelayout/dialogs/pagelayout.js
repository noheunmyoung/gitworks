(function(){POLARIS.dialog.add("pagelayout",function(a){function m(d){var b=d.data.getTarget(),a=f.equals(b);if(a||f.contains(b)){var k=d.data.getKeystroke(),e=f.getElementsByTag("a"),c;if(e){if(a)c=e.getItem(0);else switch(k){case 40:c=b.getNext();break;case 38:c=b.getPrevious();break;case 13:case 32:b.fire("click")}c&&(c.focus(),d.data.preventDefault())}}}var e,x=POLARIS.tools.addFunction(function(d){layoutItem=e[d];d=layoutItem.html;var b=POLARIS.dialog.getCurrent();a.insertHtml(d);b.hide()}),
g=POLARIS.plugins.get("pagelayout");POLARIS.document.appendStyleSheet(POLARIS.getUrl(g.path+"dialogs/pagelayout.css"));var f,g="polaris_layout_list_label_"+POLARIS.tools.getNextNumber(),t=a.lang.pagelayout,u=a.config;return{title:a.lang.pagelayout.title,minWidth:252,minHeight:126,resizable:POLARIS.DIALOG_RESIZE_NONE,contents:[{id:"selectLayout",label:"",elements:[{id:"layoutsList",type:"html",focus:!0,html:'\x3cdiv role\x3d"listbox" aria-labelledby\x3d"'+g+'"\x3e\x3cdiv class\x3d"polaris_layout_loading"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"polaris_voice_label" id\x3d"'+
g+'"\x3e'+t.options+"\x3c/span\x3e"}]}],buttons:[POLARIS.dialog.cancelButton(a,{label:a.lang.common.close})],onShow:function(){var d=this.getContentElement("selectLayout","layoutsList");f=d.getElement();POLARIS.loadLayouts(u.layouts_files,function(){var b=(u.layouts||"default").split(",");if(b.length){var a=f;a.setHtml("");for(var k=0,g=b.length;k<g;k++){var c=POLARIS.getLayouts(b[k]),m=c.imagesPath;e=c.layouts;for(var c=e.length,y=c/6,n=0;n<y;n++){var h;h=n;for(var v=m,w=POLARIS.dom.element.createFromHtml('\x3cdiv id\x3d"ddd" class\x3d"layout_div"\x3e\x3c/div\x3e'),
l='\x3ctable role\x3d"presentation"\x3e\x3ctr\x3e',p=void 0,q=0;6>q;q++){var r=6*h+q,p=e[r];p.image&&v&&(l+='\x3ctd class\x3d"polaris_pagelayout_td"\x3e\x3ca href\x3d"javascript:void(0)"  tabIndex\x3d"-1" style\x3d"width:100%; height:100%"\x3e\x3cimg src\x3d"'+POLARIS.getUrl(v+p.image)+'"'+(POLARIS.env.ie6Compat?' onload\x3d"this.width\x3dthis.width"':"")+' data-index\x3d"'+r+'"alt\x3d"'+p.image+'" onclick\x3d"POLARIS.tools.callFunction('+x+",'"+r+"'); return false;\"\x3e\x3c/a\x3e\x3c/td\x3e")}l+=
"\x3c/tr\x3e\x3c/table\x3e";w.setHtml(l);h=w;h.setAttribute("aria-posinset",n+1);h.setAttribute("aria-setsize",c);a.append(h)}}d.focus()}else f.setHtml('\x3cdiv class\x3d"polaris_layout_empty"\x3e\x3cspan\x3e'+t.emptyListMsg+"\x3c/span\x3e\x3c/div\x3e")});this._.element.on("keydown",m)},onHide:function(){this._.element.removeListener("keydown",m)}}})})();