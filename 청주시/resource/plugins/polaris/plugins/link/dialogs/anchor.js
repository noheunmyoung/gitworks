POLARIS.dialog.add("anchor",function(c){function d(a,b){return a.createFakeElement(a.document.createElement("a",{attributes:b}),"polaris_anchor","anchor")}return{title:c.lang.link.anchor.title,minWidth:180,minHeight:36,resizable:POLARIS.DIALOG_RESIZE_NONE,onOk:function(){var a=POLARIS.tools.trim(this.getValueOf("info","txtName")),a={id:a,name:a,"data-polaris-saved-name":a,applyFirstLine:!0};if(this._.selectedElement)this._.selectedElement.data("polaris-realelement")?(a=d(c,a),a.replace(this._.selectedElement),
POLARIS.env.ie&&c.getSelection().selectElement(a)):this._.selectedElement.setAttributes(a);else{var b=c.getSelection(),b=b&&b.getRanges()[0];b.collapsed?(a=d(c,a),b.insertNode(a)):(POLARIS.env.ie&&9>POLARIS.env.version&&(a["class"]="polaris_anchor"),a=new POLARIS.style({element:"a",attributes:a,ignoreReadonly:1}),a.type=POLARIS.STYLE_INLINE,c.applyStyle(a))}},onHide:function(){delete this._.selectedElement},onShow:function(){var a=c.getSelection(),b=a.getSelectedElement(),d=b&&b.data("polaris-realelement"),
e=d?POLARIS.plugins.link.tryRestoreFakeAnchor(c,b):POLARIS.plugins.link.getSelectedLink(c);if(e){this._.selectedElement=e;var f=e.data("polaris-saved-name");this.setValueOf("info","txtName",f||"");!d&&a.selectElement(e);b&&(this._.selectedElement=b)}this.getContentElement("info","txtName").focus()},contents:[{id:"info",label:c.lang.link.anchor.title,accessKey:"I",elements:[{type:"text",id:"txtName",label:c.lang.link.anchor.name,required:!0,validate:function(){return this.getValue()?!0:(alert(c.lang.link.anchor.errorName),
!1)}}]}]}});