POLARIS.dialog.add("bgImage",function(d){var b=d.lang.bgimage;return{title:b.title,minWidth:244,minHeight:116,resizable:POLARIS.DIALOG_RESIZE_NONE,onShow:function(){var a=d.document,e=a.getElementsByTag("html").getItem(0),b=a.getHead(),c=a.getBody();this.setupContent(a,e,b,c)},onOk:function(){var a=d.document,b=a.getElementsByTag("html").getItem(0),f=a.getHead(),c=a.getBody();this.commitContent(a,b,f,c)},onCancel:function(){d.execCommand("clearFilePicker")},contents:[{id:"design",label:d.lang.common.generalTab,
elements:[{type:"hbox",children:[{type:"text",id:"bgImage",style:"width:176px",label:b.bgImage,setup:function(a,b,d,c){a=c.getComputedStyle("background-image")||"";a="none"==a?"":a.replace(/url\(\s*(["']?)\s*([^\)]*)\s*\1\s*\)/i,function(a,c,b){return b});this.setValue(a)},onChange:function(){this.getDialog();var a=this.getValue(),b=new POLARIS.dom.element("img",d.document);0<a.length&&b.setAttribute("src",a)},commit:function(a,b,d,c){c.removeAttribute("background");(a=this.getValue())?(a=a.replace(/ /g,
"%20"),c.setStyle("background-image","url("+a+")")):c.removeStyle("background-image")}},{type:"vbox",filebrowser:"uploadButton",label:d.lang.image.upload,style:"width:66px",children:[{type:"file",id:"upload",style:"width:100%",hidden:!0,label:d.lang.image.btnUpload,size:38},{type:"fileButton",id:"uploadButton",style:"width:100%",filebrowser:"design:bgImage",label:d.lang.image.btnUpload,"for":["design","upload"]}]}]},{type:"select",id:"repeat",label:b.repeatLabel,"default":"repeat",items:[[b.notRepeat,
"no-repeat"],[b.repeat,"repeat"],[b.horizontalRepeat,"repeat-x"],[b.verticalRepeat,"repeat-y"]],setup:function(a,b,d,c){a=c.getComputedStyle("background-repeat")||"";""==a?this.setValue("no-repeat"):this.setValue(a)},commit:function(a,b,d,c){a=this.getValue();this.getDialog().getContentElement("design","bgImage").getValue()&&a?c.setStyle("background-repeat",a):c.removeStyle("background-repeat")}},{type:"hbox",widths:["176px"],children:[{type:"html",html:"\x26nbsp;"},{type:"button",id:"imageDelete",
style:"width: 66px;",label:b.imageDelete,onLoad:function(){this.on("click",function(a){this.getContentElement("design","bgImage").setValue("");this.getContentElement("design","repeat").setValue("repeat");d.execCommand("clearFilePicker")},this.getDialog())}}]}]}]}});