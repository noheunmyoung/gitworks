POLARIS.dialog.add("uicolor",function(b){function n(a){/^#/.test(a)&&(a=window.YAHOO.util.Color.hex2rgb(a.substr(1)));c.setValue(a,!0);c.refresh(f)}function p(a,q,b){var c=[],d="",d=q?Array.isArray(a.config.recentUsedColors)?a.config.recentUsedColors:"":"FF0000 FF5E00 FFBB00 FFE400 ABF200 1DDB16 00D8FF 0054FF 0100FF 5F00FF FF00DD FF007F 000000 FFFFFF FFD8D8 FAE0D4 FAECC5 FAF4C0 E4F7BA CEFBC9 D4F4FA D9E5FF DAD9FF E8D9FF FFD9FA FFD9EC F6F6F6 EAEAEA FFA7A7 FFC19E FFE08C FAED7D CEF279 B7F0B1 B2EBF4 B2CCFF B5B2FF D1B2FF FFB2F5 FFB2D9 D5D5D5 BDBDBD F15F5F F29661 F2CB61 E5D85C BCE55C 86E57F 5CD1E5 6799FF 6B66FF A566FF F361DC F361A6 A6A6A6 8C8C8C CC3D3D CC723D CCA63D C4B73B 9FC93C 47C83E 3DB7CC 4374D9 4641D9 8041D9 D941C5 D9418C 747474 5D5D5D 980000 993800 997000 998A00 6B9900 2F9D27 008299 003399 050099 3F0099 990085 99004C 4C4C4C 353535 670000 662500 664B00 665C00 476600 22741C 005766 002266 030066 2A0066 660058 660033 212121 191919".split(" ");
c.push('\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%" style\x3d"margin:0px;"\x3e');for(var e=0;e<d.length;e++){0===e%14&&c.push("\x3c/tr\x3e\x3ctr\x3e");var g=d[e].split("/"),h=g[0],f=g[1]||h;g[1]||(h="#"+h.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));g=a.lang.colorbutton.colors[f]||f;c.push((q?'\x3ctd align\x3d"left"\x3e':"\x3ctd\x3e")+'\x3ca class\x3d"polaris_colorbox" _polaris_focus\x3d1 hidefocus\x3dtrue title\x3d"',g,'" onclick\x3d"POLARIS.tools.callFunction(',
b,",'",h,"'); return false;\" href\x3d\"javascript:void('",g,'\')" role\x3d"option"\x3e\x3cspan class\x3d"polaris_colorbox" style\x3d"background-color:#',f,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}c.push("\x3c/tr\x3e\x3c/table\x3e");return c.join("")}var d,c,f="polaris_uicolor_picker"+POLARIS.tools.getNextNumber(),e=POLARIS.tools.getNextId()+"_pickerPreview",r=POLARIS.tools.getNextId()+"_recentColorsPalette",l=POLARIS.tools.addFunction(function(a){n(a);var b=POLARIS.document.getById(k);b&&b.setValue(a);
(b=POLARIS.document.getById(e))&&b.setStyle("background-color",a)}),k,t=p(b,!1,l),m=null;return{title:b.lang.uicolor.title,minWidth:205,minHeight:210,resizable:POLARIS.DIALOG_RESIZE_NONE,onLoad:function(){d=this;this.setupContent();POLARIS.env.ie7Compat&&d.parts.contents.setStyle("overflow","hidden")},onHide:function(){var a;(a=1==d._.currentTabIndex?this.getValueOf("palette","txtPaletteColor"):this.getValueOf("picker","txtPickerColor"))&&a!=m&&(a=a.replace(/^#/,""))&&(b.config.recentUsedColors?(b.config.recentUsedColors.unshift(a),
b.config.recentUsedColors=b.config.recentUsedColors.splice(0,14)):b.config.recentUsedColors=[a]);POLARIS.document.getById(e).removeStyle("background-color");d.getContentElement("picker","txtPickerColor").setValue("#ffffff");this.selectPage("picker");n("#ffffff")},onShow:function(){m=null;var a=p(b,!0,l),c=POLARIS.document.getById(r);c&&c.setHtml(a);POLARIS.document.getById(k).setAttribute("readOnly",!0)},setInitColor:function(a){m=a;POLARIS.tools.callFunction(l,a)},contents:[{id:"picker",label:b.lang.uicolor.tabUserColor,
title:b.lang.uicolor.tabUserColor,style:"position: relative;",expand:!0,elements:[{type:"hbox",children:[{type:"vbox",children:[{type:"html",html:"\x3cspan\x3e"+b.lang.uicolor.defaultColor+'\x3c/span\x3e\x3cdiv style\x3d"margin-top:5px;"\x3e'+t+"\x3c/div\x3e"}]},{type:"vbox",children:[{id:"yuiColorPicker",type:"html",html:"\x3cspan\x3e\x26nbsp;\x3c/span\x3e\x3cdiv id\x3d'"+f+"' class\x3d'polaris_uicolor_picker' style\x3d'position: relative; margin: 10px 0 0 10px;'\x3e\x3c/div\x3e",onLoad:function(){var a=
POLARIS.getUrl("plugins/uicolor/yui/");this.picker=c=new window.YAHOO.widget.ColorPicker(f,{images:{PICKER_THUMB:a+"assets/picker_thumb.png",HUE_THUMB:a+"assets/hue_thumb.png"}});c.on("rgbChange",function(){c.get("hex");d.getContentElement("picker","txtPickerColor").setValue("#"+c.get("hex"))});for(var a=new POLARIS.dom.nodeList(c.getElementsByTagName("input")),b=0;b<a.count();b++)a.getItem(b).addClass("polaris_dialog_ui_input_text")}}]}]},{type:"hbox",widths:["340px","auto"],children:[{type:"vbox",
children:[{type:"html",html:"\x3cspan\x3e"+b.lang.uicolor.recentColor+"\x3c/span\x3e"},{type:"html",html:'\x3cdiv id\x3d"'+r+'" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e'}]},{type:"vbox",children:[{type:"html",html:"\x3cspan\x3e"+b.lang.uicolor.selectedColor+"\x3c/span\x3e"},{type:"hbox",widths:["60px","100%"],children:[{type:"html",html:'\x3cdiv id\x3d"'+e+'" style\x3d"width: 60px;" class\x3d"polaris_dialog_ui_colorpanel"\x3e\x3c/div\x3e'},{id:"txtPickerColor",className:"colorHexCode",style:"width: 100px;",
type:"text",spellcheck:"false",onClick:function(){this.getInputElement().removeAttribute("readOnly")},onLoad:function(){k=this.getInputElement().getId()},validate:function(){var a=this.getValue();if(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a))return!0;alert(b.lang.uicolor.invalidHexColor);return!1},onChange:function(){var a=POLARIS.document.getById(e),b=this.getValue();a.setStyle("background-color",b)}}]}]}]}]}]}});