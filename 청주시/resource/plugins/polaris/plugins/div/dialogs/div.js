(function(){function g(b,k){function g(){this.foreach(function(a){/^(?!vbox|hbox)/.test(a.type)&&(a.setup||(a.setup=function(b){a.setValue(b.getAttribute(a.id)||"",1)}),a.commit||(a.commit=function(b){var d=this.getValue();if("dir"!=a.id||b.getComputedStyle("direction")!=d)d?b.setAttribute(a.id,d):b.removeAttribute(a.id)}))})}function m(a){function b(a,c){if(a)for(var d=a.elements,f=0,e;f<d.length;f++)if(e=d[f],e=e.getStyle(c))return e;return null}var d=[],f=a.getSelection();f.getRanges();var f=f.getStartElement(),
h=a.elementPath(f),f={},e={};f["line-height"]=a.config.documentLineHeight?a.config.documentLineHeight:b(h,"line-height");e["font-family"]=a.config.documentFontFamily?a.config.documentFontFamily:b(h,"font-family");e["font-size"]=a.config.documentFontSize?a.config.documentFontSize+"pt":b(h,"font-size");var h=new POLARIS.dom.element("p"),g=new POLARIS.dom.element("span");g.setStyles(e);g.setHtml("\x26#8203;");h.append(g);h.setStyles(f);divElement=new POLARIS.dom.element("div",a.document);divElement.setAttribute("doc-data-role",
"polaris-textbox");divElement.setAttribute("ondragstart","return false");divElement.append(h);a.insertElementWithBlockSplit(divElement);d.push(divElement);return d}(function(){var a=POLARIS.tools.extend({},POLARIS.dtd.$blockLimit);b.config.div_wrapTable&&(delete a.td,delete a.th);return a})();var l=b.plugins.uicolor,e=[];POLARIS.tools.getNextId();POLARIS.tools.getNextId();return{title:b.lang.div.title,minWidth:244,minHeight:160,resizable:POLARIS.DIALOG_RESIZE_NONE,contents:[{id:"info",label:b.lang.common.generalTab,
title:b.lang.common.generalTab,elements:[{type:"hbox",children:[{type:"text",id:"width",style:"width:94px;","default":"50",maxLength:3,label:b.lang.common.width,validate:function(){var a=this.getValue(),c=!!POLARIS.dialog.validate.integer()(a),a=POLARIS.tools.getContentSizeToUnit(b,"mm").width;c?(c=this.getValue(),c=!!(0<c&&c<a),c||(alert(b.lang.div.invalidWidth.replace("%1",a-1)),this.setValue(a-1),this.select())):alert(b.lang.common.invalidWidth);return c},setup:function(a){a=a.getStyle("width");
var c=parseInt(a,10);a.replace(/[0-9|.]/g,"")!=b.lang.common.unitMm&&(a=POLARIS.tools.convertToPx(a),c=POLARIS.tools.convertPxToMm(a),c=c.toFixed(0));this.setValue(c)},commit:function(a){var c=parseInt(this.getValue(),10);isNaN(c)?a.removeStyle("width"):a.setStyle("width",c+b.lang.common.unitMm);a.removeAttribute("width")}},{type:"vbox",children:[{type:"html",html:"\x26nbsp;"},{type:"html",html:b.lang.common.unitMm,style:"line-height: 32px;"}]},{type:"text",id:"height",style:"width:94px;",maxLength:3,
"default":"20",label:b.lang.common.height,validate:function(){var a=this.getValue(),c=!!POLARIS.dialog.validate.integer()(a),a=POLARIS.tools.getContentSizeToUnit(b,"mm").height;c?(c=this.getValue(),c=!!(0<c&&c<a),c||(alert(b.lang.div.invalidHeight.replace("%1",a-1)),this.setValue(a-1),this.select())):alert(b.lang.common.invalidHeight);return c},setup:function(a){var c=a.getStyle("min-height"),d=parseInt(c,10);isNaN(d)&&(c=a.getstyle("height"),d=parseInt(c,10));c.replace(/[0-9|.]/g,"")!=b.lang.common.unitMm&&
(a=POLARIS.tools.convertToPx(c),d=POLARIS.tools.convertPxToMm(a),d=d.toFixed(0));this.setValue(d)},commit:function(a){var c=parseInt(this.getValue(),10);isNaN(c)?a.removeStyle("min-height"):a.setStyle("min-height",c+b.lang.common.unitMm);a.removeAttribute("height");a.removeStyle("height");POLARIS.tools.setTimeout(function(){var c=a.getClientRect().height;b.pagination&&(c=100*c/b.pagination.getScaleRatio());c=POLARIS.tools.convertPxToMm(c);a.setStyle("min-height",c+b.lang.common.unitMm)},0,this)}},
{type:"vbox",children:[{type:"html",html:"\x26nbsp;"},{type:"html",html:b.lang.common.unitMm,style:"line-height: 32px;"}]}]},{type:"fieldset",label:b.lang.div.align,children:[]},{id:"radioFloat",type:"radio",items:[[b.lang.div.alignInitial,"none"],[b.lang.div.alignLeft,"left"],[b.lang.div.alignRight,"right"]],"default":"none",setup:function(a){a=a.getStyle("float");"left"==a?this.setValue("left"):"right"==a?this.setValue("right"):this.setValue("none")},commit:function(a){a.setStyle("float",this.getValue())}},
{type:"hbox",styles:["vertical-align:top"],children:[{id:"txtBorder",type:"select",requiredContent:"div[border]","default":b.lang.div.borderWidth[2][0],label:b.lang.div.divBorder,items:[[b.lang.div.borderWidth[0][0],b.lang.div.borderWidth[0][1]],[b.lang.div.borderWidth[1][0],b.lang.div.borderWidth[1][1]],[b.lang.div.borderWidth[2][0],b.lang.div.borderWidth[2][1]],[b.lang.div.borderWidth[3][0],b.lang.div.borderWidth[3][1]],[b.lang.div.borderWidth[4][0],b.lang.div.borderWidth[4][1]],[b.lang.div.borderWidth[5][0],
b.lang.div.borderWidth[5][1]],[b.lang.div.borderWidth[6][0],b.lang.div.borderWidth[6][1]],[b.lang.div.borderWidth[7][0],b.lang.div.borderWidth[7][1]],[b.lang.div.borderWidth[8][0],b.lang.div.borderWidth[8][1]],[b.lang.div.borderWidth[9][0],b.lang.div.borderWidth[9][1]],[b.lang.div.borderWidth[10][0],b.lang.div.borderWidth[10][1]],[b.lang.div.borderWidth[11][0],b.lang.div.borderWidth[11][1]],[b.lang.div.borderWidth[12][0],b.lang.div.borderWidth[12][1]],[b.lang.div.borderWidth[13][0],b.lang.div.borderWidth[13][1]],
[b.lang.div.borderWidth[14][0],b.lang.div.borderWidth[14][1]],[b.lang.div.borderWidth[15][0],b.lang.div.borderWidth[15][1]],[b.lang.div.borderWidth[16][0],b.lang.div.borderWidth[16][1]]],setup:function(a){(a=a.getStyle("border-width"))&&a.replace(/[0-9|.]/g,"")!=b.lang.common.unitMm&&(a=POLARIS.tools.convertToPx(a),a=POLARIS.tools.convertPxToMm(a),a=a.toFixed(1)+b.lang.common.unitMm);this.setValue(a)},commit:function(a){var c=parseFloat(this.getValue());isNaN(c)||a.setStyle("border-width",c+b.lang.common.unitMm)}},
{id:"divBorderStyle",type:"select",requiredContent:"div[border]","default":"solid",label:b.lang.div.divBorderStyle,items:[[b.lang.div.borderStyle.border_none,"none"],[b.lang.div.borderStyle.border_dotted,"dotted"],[b.lang.div.borderStyle.border_dashed,"dashed"],[b.lang.div.borderStyle.border_solid,"solid"]],setup:function(a){this.setValue(a.getStyle("border-style")||"none")},commit:function(a){"none"!=this.getValue()?a.setStyle("border-style",this.getValue()):a.removeStyle("border-style")}}]},{type:"hbox",
widths:["50%","50%"],children:[{type:"vbox",children:[{type:"html",id:"divBgColor",html:"\x3cspan\x3e"+b.lang.div.divBgColor+"\x3c/span\x3e"},{type:"vbox",className:"color_choose_parent",children:[{type:"button",id:"divBgColorChoose","class":"colorChooser",label:"",onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){l&&b.getUIColorFromDialog(function(a){a&&(this.getElement().setStyle("background-color",a),this.setValue(a))},this)},isChanged:function(){return this.getValue()!=
this.getInitValue()},setInitValue:function(){this._.initValue="#ffffff"},getInitValue:function(){return this._.initValue},commit:function(a){if(0!=this.isChanged()){var b=this.getValue();b?a.setStyle("background-color",b):a.removeStyle("background-color");a.removeAttribute("bgColor")}}}]}]},{type:"vbox",children:[{type:"html",id:"divBorderColor",html:"\x3cspan\x3e"+b.lang.div.divBorderColor+"\x3c/span\x3e"},{type:"vbox",className:"color_choose_parent",children:[{type:"button",id:"divBorderColorChoose",
"class":"colorChooser",label:"",onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){l&&b.getUIColorFromDialog(function(a){a&&(this.getElement().setStyle("background-color",a),this.setValue(a))},this)},isChanged:function(){return this.getValue()!=this.getInitValue()},setInitValue:function(){this._.initValue="#000000"},getInitValue:function(){return this._.initValue},commit:function(a){if(0!=this.isChanged()){var b=this.getValue();b?a.setStyle("border-color",
b):a.removeStyle("border-color");a.removeAttribute("border-color")}}}]}]}]},{type:"html",html:""}]},{id:"advanced",label:b.lang.common.advancedTab,title:b.lang.common.advancedTab,hidden:!0,elements:[{type:"vbox",padding:1,children:[{type:"text",id:"id",requiredContent:"div[id]",label:b.lang.common.id,"default":""},{type:"text",id:"lang",requiredContent:"div[lang]",label:b.lang.common.langCode,"default":""},{type:"text",id:"title",requiredContent:"div[title]",style:"width: 100%;",label:b.lang.common.advisoryTitle,
"default":""},{type:"select",id:"dir",requiredContent:"div[dir]",style:"width: 100%;",label:b.lang.common.langDir,"default":"",items:[[b.lang.common.notSet,""],[b.lang.common.langDirLtr,"ltr"],[b.lang.common.langDirRtl,"rtl"]]}]}]}],onLoad:function(){g.call(this)},onShow:function(){var a=this.getContentElement("info","divBgColorChoose"),c=this.getContentElement("info","divBorderColorChoose"),d="#ffffff",e="#000000";"editdiv"==k&&(this.setupContent(this._element=POLARIS.plugins.div.getSurroundDiv(b)),
d=this._element.getStyle("background-color")||"#ffffff",e=this._element.getStyle("border-color")||"#000000");a.setValue(d);a.getElement().setStyle("background-color",d);c.setValue(e);c.getElement().setStyle("background-color",e)},onOk:function(){if("editdiv"==k)e=[this._element];else{if(POLARIS.plugins.div.getSurroundDiv(b))return;b.pagination&&b.pagination.adjustCaret(b);e=m(b,!0)}for(var a=e.length,c=0;c<a;c++)this.commitContent(e[c]),!e[c].getAttribute("style")&&e[c].removeAttribute("style");this.hide()},
onHide:function(){"editdiv"==k&&this._element.removeCustomData("elementStyle");delete this._element}}}POLARIS.dialog.add("creatediv",function(b){return g(b,"creatediv")});POLARIS.dialog.add("editdiv",function(b){return g(b,"editdiv")})})();